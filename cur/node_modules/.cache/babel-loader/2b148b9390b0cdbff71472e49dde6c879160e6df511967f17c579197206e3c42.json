{"ast":null,"code":"import{useEffect}from'react';import{load,STORAGE}from'../utils/storage';export const useTheme=theme=>{useEffect(()=>{const root=document.documentElement;// Remove all theme classes\nroot.classList.remove('dark','glass','dark-glass','midnight','space-gray','graphite','gold','silver','purple','pink');// macOS 26 Future Theme System\nif(theme==='dark'){root.classList.add('dark');}else if(theme==='glass'){root.classList.add('glass');}else if(theme==='dark-glass'){root.classList.add('dark-glass');}else if(theme==='midnight'){root.classList.add('midnight');}else if(theme==='space-gray'){root.classList.add('space-gray');}else if(theme==='graphite'){root.classList.add('graphite');}else if(theme==='gold'){root.classList.add('gold');}else if(theme==='silver'){root.classList.add('silver');}else if(theme==='purple'){root.classList.add('purple');}else if(theme==='pink'){root.classList.add('pink');}// Light theme is default and uses CSS variables from :root\n// Load custom background with enhanced error handling\ntry{const customBg=load(STORAGE.BG,null);console.log('Theme changed, checking background:',{theme,backgroundFound:!!customBg,backgroundLength:customBg?customBg.length:0,backgroundStart:customBg?customBg.substring(0,30)+'...':'none'});if(customBg&&customBg.trim()!==''){console.log('Applying custom background:',customBg.substring(0,50)+'...');// Set the CSS variable\nroot.style.setProperty('--custom-bg',\"url(\\\"\".concat(customBg,\"\\\")\"));// Also set it directly on body as a fallback\ndocument.body.style.backgroundImage=\"url(\\\"\".concat(customBg,\"\\\")\");document.body.style.backgroundSize='cover';document.body.style.backgroundPosition='center';document.body.style.backgroundAttachment='fixed';// Log what was actually set\nconsole.log('CSS variable set:',root.style.getPropertyValue('--custom-bg'));console.log('Body style set:',document.body.style.backgroundImage.substring(0,50)+'...');}else{console.log('No custom background found, using default');root.style.setProperty('--custom-bg','none');document.body.style.backgroundImage='';}}catch(error){console.error('Error loading custom background:',error);root.style.setProperty('--custom-bg','none');document.body.style.backgroundImage='';}},[theme]);};","map":{"version":3,"names":["useEffect","load","STORAGE","useTheme","theme","root","document","documentElement","classList","remove","add","customBg","BG","console","log","backgroundFound","backgroundLength","length","backgroundStart","substring","trim","style","setProperty","concat","body","backgroundImage","backgroundSize","backgroundPosition","backgroundAttachment","getPropertyValue","error"],"sources":["C:/Users/Никита/Desktop/GALL/p2/cur/src/hooks/useTheme.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { load, STORAGE } from '../utils/storage';\n\nexport const useTheme = (theme) => {\n  useEffect(() => {\n    const root = document.documentElement;\n    \n    // Remove all theme classes\n    root.classList.remove('dark', 'glass', 'dark-glass', 'midnight', 'space-gray', 'graphite', 'gold', 'silver', 'purple', 'pink');\n    \n    // macOS 26 Future Theme System\n    if (theme === 'dark') {\n      root.classList.add('dark');\n    } else if (theme === 'glass') {\n      root.classList.add('glass');\n    } else if (theme === 'dark-glass') {\n      root.classList.add('dark-glass');\n    } else if (theme === 'midnight') {\n      root.classList.add('midnight');\n    } else if (theme === 'space-gray') {\n      root.classList.add('space-gray');\n    } else if (theme === 'graphite') {\n      root.classList.add('graphite');\n    } else if (theme === 'gold') {\n      root.classList.add('gold');\n    } else if (theme === 'silver') {\n      root.classList.add('silver');\n    } else if (theme === 'purple') {\n      root.classList.add('purple');\n    } else if (theme === 'pink') {\n      root.classList.add('pink');\n    }\n    // Light theme is default and uses CSS variables from :root\n\n    // Load custom background with enhanced error handling\n    try {\n      const customBg = load(STORAGE.BG, null);\n      \n      console.log('Theme changed, checking background:', {\n        theme,\n        backgroundFound: !!customBg,\n        backgroundLength: customBg ? customBg.length : 0,\n        backgroundStart: customBg ? customBg.substring(0, 30) + '...' : 'none'\n      });\n      \n      if (customBg && customBg.trim() !== '') {\n        console.log('Applying custom background:', customBg.substring(0, 50) + '...');\n        \n        // Set the CSS variable\n        root.style.setProperty('--custom-bg', `url(\"${customBg}\")`);\n        \n        // Also set it directly on body as a fallback\n        document.body.style.backgroundImage = `url(\"${customBg}\")`;\n        document.body.style.backgroundSize = 'cover';\n        document.body.style.backgroundPosition = 'center';\n        document.body.style.backgroundAttachment = 'fixed';\n        \n        // Log what was actually set\n        console.log('CSS variable set:', root.style.getPropertyValue('--custom-bg'));\n        console.log('Body style set:', document.body.style.backgroundImage.substring(0, 50) + '...');\n      } else {\n        console.log('No custom background found, using default');\n        root.style.setProperty('--custom-bg', 'none');\n        document.body.style.backgroundImage = '';\n      }\n    } catch (error) {\n      console.error('Error loading custom background:', error);\n      root.style.setProperty('--custom-bg', 'none');\n      document.body.style.backgroundImage = '';\n    }\n  }, [theme]);\n};\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,OAASC,IAAI,CAAEC,OAAO,KAAQ,kBAAkB,CAEhD,MAAO,MAAM,CAAAC,QAAQ,CAAIC,KAAK,EAAK,CACjCJ,SAAS,CAAC,IAAM,CACd,KAAM,CAAAK,IAAI,CAAGC,QAAQ,CAACC,eAAe,CAErC;AACAF,IAAI,CAACG,SAAS,CAACC,MAAM,CAAC,MAAM,CAAE,OAAO,CAAE,YAAY,CAAE,UAAU,CAAE,YAAY,CAAE,UAAU,CAAE,MAAM,CAAE,QAAQ,CAAE,QAAQ,CAAE,MAAM,CAAC,CAE9H;AACA,GAAIL,KAAK,GAAK,MAAM,CAAE,CACpBC,IAAI,CAACG,SAAS,CAACE,GAAG,CAAC,MAAM,CAAC,CAC5B,CAAC,IAAM,IAAIN,KAAK,GAAK,OAAO,CAAE,CAC5BC,IAAI,CAACG,SAAS,CAACE,GAAG,CAAC,OAAO,CAAC,CAC7B,CAAC,IAAM,IAAIN,KAAK,GAAK,YAAY,CAAE,CACjCC,IAAI,CAACG,SAAS,CAACE,GAAG,CAAC,YAAY,CAAC,CAClC,CAAC,IAAM,IAAIN,KAAK,GAAK,UAAU,CAAE,CAC/BC,IAAI,CAACG,SAAS,CAACE,GAAG,CAAC,UAAU,CAAC,CAChC,CAAC,IAAM,IAAIN,KAAK,GAAK,YAAY,CAAE,CACjCC,IAAI,CAACG,SAAS,CAACE,GAAG,CAAC,YAAY,CAAC,CAClC,CAAC,IAAM,IAAIN,KAAK,GAAK,UAAU,CAAE,CAC/BC,IAAI,CAACG,SAAS,CAACE,GAAG,CAAC,UAAU,CAAC,CAChC,CAAC,IAAM,IAAIN,KAAK,GAAK,MAAM,CAAE,CAC3BC,IAAI,CAACG,SAAS,CAACE,GAAG,CAAC,MAAM,CAAC,CAC5B,CAAC,IAAM,IAAIN,KAAK,GAAK,QAAQ,CAAE,CAC7BC,IAAI,CAACG,SAAS,CAACE,GAAG,CAAC,QAAQ,CAAC,CAC9B,CAAC,IAAM,IAAIN,KAAK,GAAK,QAAQ,CAAE,CAC7BC,IAAI,CAACG,SAAS,CAACE,GAAG,CAAC,QAAQ,CAAC,CAC9B,CAAC,IAAM,IAAIN,KAAK,GAAK,MAAM,CAAE,CAC3BC,IAAI,CAACG,SAAS,CAACE,GAAG,CAAC,MAAM,CAAC,CAC5B,CACA;AAEA;AACA,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAGV,IAAI,CAACC,OAAO,CAACU,EAAE,CAAE,IAAI,CAAC,CAEvCC,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAE,CACjDV,KAAK,CACLW,eAAe,CAAE,CAAC,CAACJ,QAAQ,CAC3BK,gBAAgB,CAAEL,QAAQ,CAAGA,QAAQ,CAACM,MAAM,CAAG,CAAC,CAChDC,eAAe,CAAEP,QAAQ,CAAGA,QAAQ,CAACQ,SAAS,CAAC,CAAC,CAAE,EAAE,CAAC,CAAG,KAAK,CAAG,MAClE,CAAC,CAAC,CAEF,GAAIR,QAAQ,EAAIA,QAAQ,CAACS,IAAI,CAAC,CAAC,GAAK,EAAE,CAAE,CACtCP,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEH,QAAQ,CAACQ,SAAS,CAAC,CAAC,CAAE,EAAE,CAAC,CAAG,KAAK,CAAC,CAE7E;AACAd,IAAI,CAACgB,KAAK,CAACC,WAAW,CAAC,aAAa,UAAAC,MAAA,CAAUZ,QAAQ,OAAI,CAAC,CAE3D;AACAL,QAAQ,CAACkB,IAAI,CAACH,KAAK,CAACI,eAAe,UAAAF,MAAA,CAAWZ,QAAQ,OAAI,CAC1DL,QAAQ,CAACkB,IAAI,CAACH,KAAK,CAACK,cAAc,CAAG,OAAO,CAC5CpB,QAAQ,CAACkB,IAAI,CAACH,KAAK,CAACM,kBAAkB,CAAG,QAAQ,CACjDrB,QAAQ,CAACkB,IAAI,CAACH,KAAK,CAACO,oBAAoB,CAAG,OAAO,CAElD;AACAf,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAET,IAAI,CAACgB,KAAK,CAACQ,gBAAgB,CAAC,aAAa,CAAC,CAAC,CAC5EhB,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAER,QAAQ,CAACkB,IAAI,CAACH,KAAK,CAACI,eAAe,CAACN,SAAS,CAAC,CAAC,CAAE,EAAE,CAAC,CAAG,KAAK,CAAC,CAC9F,CAAC,IAAM,CACLN,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC,CACxDT,IAAI,CAACgB,KAAK,CAACC,WAAW,CAAC,aAAa,CAAE,MAAM,CAAC,CAC7ChB,QAAQ,CAACkB,IAAI,CAACH,KAAK,CAACI,eAAe,CAAG,EAAE,CAC1C,CACF,CAAE,MAAOK,KAAK,CAAE,CACdjB,OAAO,CAACiB,KAAK,CAAC,kCAAkC,CAAEA,KAAK,CAAC,CACxDzB,IAAI,CAACgB,KAAK,CAACC,WAAW,CAAC,aAAa,CAAE,MAAM,CAAC,CAC7ChB,QAAQ,CAACkB,IAAI,CAACH,KAAK,CAACI,eAAe,CAAG,EAAE,CAC1C,CACF,CAAC,CAAE,CAACrB,KAAK,CAAC,CAAC,CACb,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}